<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Calendario Personalizable</title>

<style>
body {
    font-family: "Segoe UI", sans-serif;
    background: #f4f6f8;
    padding: 20px;
}

/* CONTENEDOR */
.container {
    display: flex;
    align-items: flex-start;
    gap: 15px;
}

/* CALENDARIO */
#calendar {
    width: 320px;
    padding: 15px;
    border-radius: 12px;
    background-color: #e3f2fd;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}

/* MES */
#monthYear {
    text-align: center;
    font-weight: bold;
    margin-bottom: 10px;
}

/* DIAS */
.days {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 6px;
}

.day {
    height: 38px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    border-radius: 50%;
}

.day:hover {
    background-color: rgba(0,0,0,0.08);
}

.selected {
    background-color: yellow;
}

/* BOTON PALETA */
#paletteBtn {
    width: 34px;
    height: 34px;
    border-radius: 50%;
    background: linear-gradient(45deg, red, yellow, green, blue);
    border: none;
    cursor: pointer;
}

#colorPicker {
    display: none;
}

/* NOTAS */
.notes {
    width: 320px;
    margin-top: 15px;
}

.note-line {
    border-bottom: 1px dashed #aaa;
    height: 22px;
    margin-bottom: 8px;
}

.note-line[contenteditable="true"]:focus {
    outline: none;
}
</style>
</head>

<body>

<div class="container">
    <div id="calendar">
        <div id="monthYear"></div>
        <div class="days" id="days"></div>
    </div>

    <button id="paletteBtn" title="Cambiar color"></button>
    <input type="color" id="colorPicker">
</div>

<div class="notes" id="notes"></div>

<script>
const calendar = document.getElementById("calendar");
const daysContainer = document.getElementById("days");
const monthYear = document.getElementById("monthYear");
const paletteBtn = document.getElementById("paletteBtn");
const colorPicker = document.getElementById("colorPicker");
const notesContainer = document.getElementById("notes");

const date = new Date();
const month = date.getMonth();
const year = date.getFullYear();

const months = ["Enero","Febrero","Marzo","Abril","Mayo","Junio",
"Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];

monthYear.textContent = `${months[month]} ${year}`;

const daysInMonth = new Date(year, month + 1, 0).getDate();

let calendarColor = "#e3f2fd";
let selectedDay = null;

function circleColor() {
    return calendarColor.toLowerCase() === "#ffff00" ? "#d6c800" : "yellow";
}

function loadNotes(day) {
    notesContainer.innerHTML = "";
    const saved = JSON.parse(localStorage.getItem("notes-"+day)) || ["","","",""];
    saved.forEach((text, i) => {
        const line = document.createElement("div");
        line.className = "note-line";
        line.contentEditable = true;
        line.textContent = text;
        line.addEventListener("input", () => {
            saved[i] = line.textContent;
            localStorage.setItem("notes-"+day, JSON.stringify(saved));
        });
        notesContainer.appendChild(line);
    });
}

for (let i = 1; i <= daysInMonth; i++) {
    const day = document.createElement("div");
    day.textContent = i;
    day.className = "day";

    day.addEventListener("click", () => {
        document.querySelectorAll(".day").forEach(d => {
            d.classList.remove("selected");
            d.style.backgroundColor = "";
        });
        day.classList.add("selected");
        day.style.backgroundColor = circleColor();
        selectedDay = i;
        loadNotes(i);
    });

    daysContainer.appendChild(day);
}

paletteBtn.addEventListener("click", () => colorPicker.click());

colorPicker.addEventListener("input", e => {
    calendarColor = e.target.value;
    calendar.style.backgroundColor = calendarColor;
    if (selectedDay) {
        document.querySelector(".selected").style.backgroundColor = circleColor();
    }
});
</script>

</body>
</html>
